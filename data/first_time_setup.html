
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="TALOS First Time Setup">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="author" content="Caden Miller">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First Time Setup</title>

    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/pico.min.css">
  </head>

  <main class="container">

    <hgroup>
      <h2><i class="fa fa-wrench fa-fw" aria-hidden="true"></i> Let's get you setup. </h2>
      <p>Here's TALOS, your personal status device.</p>
    </hgroup>

    <form action="/done" method="get" id="setup_form" onsubmit="redirectToComplete()">
      <div class="grid">

        <article>
          <h3> <i class="fa fa-wifi fa-fw"></i> WiFi Information</h3>
          
          <input type="text" id="wifi_ssid" name="wifi_ssid" placeholder="&#xf25b; WiFi SSID" style="font-family:Arial, FontAwesome" required/>
          <label for="wifi_password">
            
            <input type="password" id="wifi_password" name="wifi_password" placeholder="&#xf023; Password" style="font-family:Arial, FontAwesome" required />
          </label>
          <input type="checkbox" id="wifi_password_show" onchange="togglePassword()" />
          <label for="wifi_password_show">Show Password</label>
        
        </article>

        <article>
          
          <label for="enable_24_hour_clock">
            <input type="checkbox" id="enable_24_hour_clock" name="use_24_hour_clock" />
            Use 24 Hour Clock
          </label>

          <h3><i class="fa fa-clock-o"></i>  Time Information</h3>
          <input type="number" id="utc_offset" name="utc_offset" placeholder="UTC Offset Seconds" style="font-family:Arial, FontAwesome" required />


        </article>
        

        <article>
          <h3><i class="fa fa-spotify fa-fw" aria-hidden="true"></i> Spotify</h3>

          <label for="enable_spotify">
            <blockquote>
              <b>NOTE</b><br>
              In order to finish configuring Spotify, after setup go to <a href="http://talos.local/spotify">http://talos.local/spotify</a> on your device or computer and authorize Spotify.
            </blockquote>

            <input type="checkbox" id="enable_spotify" name="enable_spotify" />
              Enable Spotify

          </label>
        </article>
      </div>

      
      <button type="submit" class="secondary">Finish</button>
    </form>
    <blockquote>
      The first time setup can always be reset via Web Serial at <a href="https://cadenmiller.dev/talos">https://cadenmiller.dev/talos</a>.<br>
      An alternative is to recompiling and uploading TALOS at <a href="https://github.com/cadenmiller/talos">https://github.com/cadenmiller/talos</a>.
    </blockquote>
  </main>
</html>

<script>
  const checkPassword = document.getElementById("wifi_password_show");
  const inputPassword = document.getElementById("wifi_password");
  const utcOffset = document.getElementById("utc_offset");

  

  function togglePassword()
  {
    inputPassword.setAttribute("type", checkPassword.checked ? "text" : "password");
  }

  function redirectToComplete()
  {
    location = document.baseURI + "/setup_complete.html";
  }

  function getUtcOffset()
  {
    return new Date().getTimezoneOffset() * 60;
  }

  function loaded()
  {
    utcOffset.value = getUtcOffset();
  }

  window.onload = loaded;

</script>